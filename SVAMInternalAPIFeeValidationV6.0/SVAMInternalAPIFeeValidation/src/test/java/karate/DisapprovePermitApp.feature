Feature: IntakeLicense
Background:
			* url BaseURL
  		* def config = { username: '#(dbUserName)', password:'#(dbUserPassword)', url: '#(dbQuery)',driverClassName: 'com.microsoft.sqlserver.jdbc.SQLServerDriver' }
    	* def DbUtils = Java.type('utils.DbUtils')
    	* def db = new DbUtils(config)
			
#********* SignIn *********************

Scenario Outline: Intake License Submission
   
	# ********* App Intake *********************
  	* call read('LoginDetails.feature') { strToken:'#(strToken)'}
 
	Given path '/internalapi/api/licensing/selectapptype/savenewpermitapp'
	  * def dbSts = db.cleanHeap()
      And header authorization = 'Bearer ' + strToken
  	  And header Content-Type = 'application/json; charset=utf-8'
      And header Accept = 'application/json; text/plain;*/*'
   		
      * def mainLicensePermitTypeId = <LicensePermitTypeId>
     And print mainLicensePermitTypeId
     	
      * def termInYears = <NumberOfTerm>
     And print termInYears
      * def termDesc = <NumberOfTerm>+' Year (s)'
     	 And print termDesc
      * def licenseFees = <InitialLicFee>
     And print licenseFees
     	
      * def fillingFees = <NonRefundableFilingFees>
     And print fillingFees
     	
      * def renewalFees = <RenewalFilingFees>+''
     And print renewalFees
     	
      * def bondFees = <bond>
     And print bondFees	
    
    * string productName = <LicDescription>
     * def totalFees = licenseFees  + fillingFees
     And print totalFees	
   
      And request {"businessType":"","permitType":"Standalone Permit","mainLicenseId":null,"tempPermitTypeId":[],"mainApplicationId":"","associatedLicenseList":[],"isMainTempPermitRequired":false,"newPermitTypeIds":[{"permitTypeId":'#(mainLicensePermitTypeId)'}],"isNotQualified":false,"notQualifiedReason":""}
                  #{"mainLicensePermitTypeId":,"newPermitTypeIds":[],"combinedCraftId":null,"masterFileId":null,"isApplicableForTempPermit":false,"isNotQualified":false,"isChainRestaurant":false,"addBarList":[],"countyId":1,"isApplicantCurrentLicensed":false,"isExistingManufacturer":false,"selectedLicense":null}
	  When method post
	  Then status 200
	 
	 And def ApplicationId = response[0].mainApplicationId
	  And print ApplicationId
	  And def description = response[0].description
	 
	   And def appId = response[0].appId
	  
	   * def formId = response[0].formId
	 
	 Given path '/internalapi/api/licensing/app/static/applicantinfo/save/'+appId
      
  	  And header Content-Type = 'application/json; charset=utf-8'
  	  * def getDate =
		  """
		  function() {
		    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
		    var sdf = new SimpleDateFormat('yyyyMMddHHmmss');
		    var date = new java.util.Date();
		    return sdf.format(date);
		  } 
		  """
  	  * def temp = 'Automation'+getDate()

      And header Accept = 'application/json; text/plain;*/*'
      And header authorization = 'Bearer ' + strToken
      And request {"businessInfo":{"website":null,"businessEntity":{"individualOrganization":"1","corporateStructure":"1","firstName":'#(temp)',"lastName":"Permit","middleName":"","suffix":null,"ssn":"","fein":"","legalName":"Automation AutoPermit","id":0,"isEmployeeForSoleProprietor":null,"individualOrganizationText":null,"corporateStructureText":null,"isIndividual":false},"address":{"addressId":0,"appId":null,"addressLine1":null,"addressLine2":null,"city":null,"stateId":40,"county":null,"zipCode":null,"zip4":null,"street":null,"telephoneNumber":null,"country":"United States (US)","addressTypeId":null,"location":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"modifiedDate":null,"isActive":null,"showAndHide":null,"roomNo":null,"stateName":"New York","countryId":229,"serialNo":0,"addressType":null,"state":null},"communication":{"email":"automation@test.com","confirmEmail":"automation@test.com","phones":[],"id":0},"id":0,"isLicensed":false,"isAssociated":false},"premisesInfo":{"dba":null,"licensePermitID":null,"address":{"addressId":0,"appId":null,"addressLine1":"Test","addressLine2":null,"city":"New York","stateId":40,"county":"New York","zipCode":"11111","zip4":"1111","street":null,"telephoneNumber":null,"country":"United States (US)","addressTypeId":null,"location":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"modifiedDate":null,"isActive":null,"showAndHide":null,"roomNo":null,"stateName":"New York","countryId":229,"serialNo":0,"addressType":null,"state":null},"communication":{"email":null,"confirmEmail":null,"phones":[],"id":0},"id":0},"applicantDetail":{"masterFileID":null,"mfExpDate":null,"certificateNysTax":null,"certIssueDate":null,"applicantStatement":{"nameOfApplicant":null,"date":null,"title":null,"signature":null,"id":0},"id":0,"isPhysicalChange":null}}
	   When method post
	  Then status 200
	 
	  
	  
	  
   Given path '/internalapi/api/licensing/app/static/principal/save/'+appId
      
  	  And header Content-Type = 'application/json; charset=utf-8'
  	  * def getDate1 =
		  """
		  function() {
		    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
		    var sdf = new SimpleDateFormat('yyyyMMddHHmmss');
		    var date = new java.util.Date();
		    return sdf.format(date);
		  } 
		  """
  	  * def prncipalName = 'Automation'+getDate1()

      And header Accept = 'application/json; text/plain;*/*'
      And header authorization = 'Bearer ' + strToken
      And request {"entities":[],"principals":[{"principalId":0,"convictedOfCrime":"","percentageOfOwners":"","isFingerprintRequired":"","isFingerprintsApproved":"","title":"","numberOfShares":"","isSignature":"","date":"","address":{"addressLine1":"","addressLine2":"","stateId":40,"county":"","city":"","zipCode":"","zip4":"","country":"United States (US)","stateName":"New York","countryId":229,"zip":""},"person":{"personId":0,"firstName":'#(prncipalName)',"middleName":"","lastName":"License","suffix":"","socialSecurityNo":"","birthDate":"","age":"","choosedEntity":null,"ssnFormat":""},"isIndividualsPartnersAssociatedWithEntity":"","communication":{"id":0,"phones":[],"email":"automation@test.com","confirmEmail":"automation@test.com"},"disableFlags":"{\"isExisitingPrincipal\":false,\"isExistingPrincipalInBusiness\":false,\"isRenewalAndAmendPrincipal\":false,\"isNewPrincipal\":true}","isAssociated":false}]}
	  When method post
	  Then status 200
	
	  
	  
  # ********* Representative ********************* 
    
    
    Given path '/internalapi/api/licensing/app/static/rep/save/'+appId
    And header authorization = 'Bearer ' + strToken
   	And request {"id":0,"contactType":"1","otherContactType":null,"selfCertified":null,"nysRegistrationNumber":null,"areYouBeingCompensated":null,"otherDescription":"Test Desc","subjectOfAppearance":null,"compensationType":null,"address":{"addressLine1":"1 wall street","addressLine2":"","county":"New York","city":"New York","zipCode":"10011","country":"United States (US)","stateName":"New York","countryId":229,"stateId":40},"isSelfCertifiedApplication":false,"person":{"personId":"0","isIndividualsPartnersAssociatedWithEntity":"","firstName":"Automation","middleName":"","lastName":"Automation","suffix":"","socialSecurityNo":"","birthDate":"","email":"","age":"","choosedEntity":""},"communication":{"email":"sbandi@svam.com","confirmEmail":"sbandi@svam.com","phones":[],"id":0},"phoneDetails":{"phoneType":"","countryCode":"","phone":"","phoneExtension":"","phoneId":0},"contactTypeText":""}
    When method post
    Then status 200
    And def serverResponse = response
   
    
 # ********* Right to Premise ********************* 
    
    
   
    
   Given path '/internalapi/api/licensing/app/save'
    And header authorization = 'Bearer ' + strToken
    And request {"isApproved":false,"appId":'#(appId)',"formID":'#(formId)',"applicationID":"","formName":'#(description)',"formType":{},"formTypeId":null,"applicationType":{},"applicationTypeId":null,"formCategory":{},"formCategoryId":null,"approvalFlag":null,"status":"","createdBy":"","createdDate":"","modifiedBy":"","sections":[{"show":true,"repeat":false,"isEditable":false,"fields":[{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1957,"key":"","label":"By what right does the applicant have possession of the premises?","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":1,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1958,"key":"","label":"Explain","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":0,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"No","fieldID":1959,"key":"","label":"Do the terms of the lease or other arrangement require the applicant to provide any consideration based on a percentage of the receipts of the business?","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":2,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1960,"key":"","label":"If yes, list the section/page of the lease this information can be found","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":3,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"No","fieldID":1961,"key":"","label":"Does or will anyone other than the applicant/principals share on a percentage basis or in any way in the receipts, losses, or deficiencies of the business to any extent whatsoever","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":4,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""}],"sectionID":1226,"sectionName":"","key":"0","label":"Right to Premises","order":5,"createdBy":"","createdDate":"","modifiedBy":"","tableName":"","isSpecial":false,"isMultipleAllowed":false,"sectionType":null,"sectionSubTypeId":null,"subSections":[{"show":true,"repeat":false,"isEditable":false,"fields":[{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"Robert","fieldID":1685,"key":"","label":"","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":1,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1686,"key":"","label":"","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":1,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"Pascal","fieldID":1687,"key":"","label":"","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":1,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"1 wall street","fieldID":1697,"key":"","label":"","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":1,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1698,"key":"","label":"","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":1,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"New York","fieldID":1699,"key":"","label":"","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":1,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"1","fieldID":1700,"key":"","label":"","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":1,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"10011","fieldID":1701,"key":"","label":"","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":1,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1754,"key":"","label":"","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":1,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1934,"key":"","label":"","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":1,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1935,"key":"","label":"","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":1,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""}],"sectionID":1218,"sectionName":"","key":"0","label":"Other Interested","order":1,"createdBy":"","createdDate":"","modifiedBy":"","tableName":"","isSpecial":false,"isMultipleAllowed":false,"sectionType":null,"sectionSubTypeId":null,"subSections":[],"sectionFieldOrders":[]}],"sectionFieldOrders":[]}],"formVersionId":1231,"version":7,"licenseDescription":"","statusDescription":"Draft","appStatusId":1,"showApplicant":true,"showRepresentative":true,"showPrincipal":true,"showLandlord":true,"showVehicles":false,"showSchedule":false,"staticTabSequence":{"Applicant Information":0,"Principal":1,"Representative":2,"Landlord Identification":3,"Personal Questionnaire":4},"staticTaborder":["Applicant Information","Principal","Representative","Landlord Identification","Personal Questionnaire"],"showPQ":true}
    When method post
    Then status 200
    And def serverResponse = response
    
	Given path '/internalapi/api/licensing/fees/licenses/get/'+appId
      
  	  And header Content-Type = 'application/json; charset=utf-8'
      And header Accept = 'application/json; text/plain;*/*'
      And header authorization = 'Bearer ' + strToken
      And request {}
	  When method get
	  Then status 200
	  And def serverResponse = response
	  * def licTerm = serverResponse[0].term
	  * def licFees = serverResponse[0].licensingFees+''
	  * def licTermDesc = serverResponse[0].termDesc
	  * def licFeesRefId =  serverResponse[0].feesRefId
	  * def licbondFee = serverResponse[0].bondFee
	  * def licAncillaryFees = serverResponse[0].ancillaryFees+''
	  * def licfilingFees = serverResponse[0].filingFees+''
	  * def licInitialFees = serverResponse[0].initialFees
	  
	 # And def totalFees = licInitialFees+licfilingFees+licAncillaryFees
	  #And print totalFees  
 	Given path '/internalapi/api/notification/SaveNotification'
      
  	  And header Content-Type = 'application/json; charset=utf-8'
      And header Accept = 'application/json; text/plain;*/*'
      And header authorization = 'Bearer ' + strToken
      And request {"applicant":{"communicationId":8531,"email":"automation@test.com","appId":'#(appId)',"emailContactTypeId":1,"isChecked":true,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"attorney":{"communicationId":0,"email":null,"appId":0,"emailContactTypeId":0,"isChecked":false,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"communityBoard":{"communicationId":0,"email":null,"appId":0,"emailContactTypeId":0,"isChecked":false,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"other":{"communicationId":0,"email":"","appId":'#(appId)',"emailContactTypeId":0,"isChecked":false,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"isInstantEmail":false,"appId":'#(appId)',"createdBy":"Tarun  Gupta"}
	  When method post
	  Then status 200
	  And print response
	  
	  
	
	  
	  Given path 'internalapi/api/licensing/fees/details/save/'+appId+'/false'
      And header Content-Type = 'application/json; charset=utf-8'
  	  * def futureDateFunc =
		  """
		  function() {
		    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
		    var sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
		    
		    var date = new java.util.Date();
		    var dayAfter = new java.util.Date(date.getTime() + java.util.concurrent.TimeUnit.DAYS.toMillis( 30 ));
		    return sdf.format(dayAfter);
		  } 
		  """
		  
		   * def getDate2 =
		  """
		  function() {
		    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
		    var sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
		    var date = new java.util.Date();
		    return sdf.format(date);
		  } 
		  """
  	  * def date = getDate2()
	  * def futureDate = futureDateFunc()
      And header Accept = 'application/json; text/plain;*/*'
      And header authorization = 'Bearer ' + strToken
     
      And request {"checks":[{"appId":'#(appId)',"slaintakeDate":"2022-03-24T09:42:15.865Z","applyClick":false,"paymentSource":"RDC","checkNo":"1","batchNo":1,"itemNo":1,"slareceivedDate":"2022-03-24T00:00:00.000Z","amount":40000}],"appFees":{"appFees":[{"licenseName":'#(description)',"applicationId":'#(ApplicationId)',"applicationTypeId":1,"appFeesId":0,"appId":'#(appId)',"feesRefId":'#(licFeesRefId)',"initialFees":0,"licensingFees":'#(licenseFees)',"amendmentFees":"0.00","renewalFees":"0.00","totalFees":'#(totalFees)',"filingFees":'#(licfilingFees)',"ancillaryFees":"0.00","isFeesWaived":false,"underPaymentAmount":'#(totalFees)',"amountReceived":"0.00","waivedComment":null,"isBondReceived":false,"isBondRequired":true,"bondFee":'#(licbondFee)',"term":'#(licTerm)',"termDesc":'#(licTermDesc)',"seasonalStartDate":null,"seasonalEndDate":null,"isFeesCountBased":false,"isFeesUnitBased":false,"numOfUnits":0,"paymentDetails":[],"lateFee":0,"isFeesBarPerDay":null}],"bondDetails":null,"isPaymentFailed":false,"isUnderpaid":true,"sendNotification":false,"fundDueDate":"2022-03-31T00:00:00.000Z","emailNotificationDetail":{"applicant":{"communicationId":15102,"email":"automation@test.com","appId":'#(appId)',"emailContactTypeId":1,"isChecked":true,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"attorney":{"communicationId":0,"email":null,"appId":0,"emailContactTypeId":0,"isChecked":false,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"communityBoard":{"communicationId":0,"email":null,"appId":0,"emailContactTypeId":0,"isChecked":false,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"other":{"communicationId":0,"email":"","appId":'#(appId)',"emailContactTypeId":0,"isChecked":false,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"isInstantEmail":false,"appId":'#(appId)',"createdBy":"Tarun  Gupta"}},"notificationDetails":{"applicant":{"communicationId":15102,"email":"automation@test.com","appId":'#(appId)',"emailContactTypeId":1,"isChecked":true,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"attorney":{"communicationId":0,"email":null,"appId":0,"emailContactTypeId":0,"isChecked":false,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"communityBoard":{"communicationId":0,"email":null,"appId":0,"emailContactTypeId":0,"isChecked":false,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"other":{"communicationId":0,"email":"","appId":'#(appId)',"emailContactTypeId":0,"isChecked":false,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"isInstantEmail":false,"appId":'#(appId)',"createdBy":"Tarun  Gupta"},"taskId":null}
     When method post
	  Then status 200

  Given path 'internalapi/api/licensing/fees/check-payments/get/'+appId
    And header authorization = 'Bearer ' + strToken
    And request {}
    When method get
    Then status 200
    And def checkDetailId = response[0].checkDetailId
    And print checkDetailId
 
   Given path '/internalapi/api/licensing/fees/details/save/'+appId+'/false'
      And header Content-Type = 'application/json; charset=utf-8'
  	  * def futureDateFunc =
		  """
		  function() {
		    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
		    var sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
		    
		    var date = new java.util.Date();
		    var dayAfter = new java.util.Date(date.getTime() + java.util.concurrent.TimeUnit.DAYS.toMillis( 30 ));
		    return sdf.format(dayAfter);
		  } 
		  """
 	* def futureDate = futureDateFunc()
		   * def getDate2 =
		  """
		  function() {
		    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
		    var sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
		    var date = new java.util.Date();
		    return sdf.format(date);
		  } 
		  """
  	  * def date = getDate2()

      And header Accept = 'application/json; text/plain;*/*'
      And header authorization = 'Bearer ' + strToken
      And request {"checks":[{"appId":'#(appId)',"slaintakeDate":'#(date)',"applyClick":false,"paymentSource":"RDC","checkNo":"1","batchNo":1,"itemNo":1,"slareceivedDate":'#(date)',"amount":'#(totalFees)'}],"appFees":{"appFees":[{"licenseName":'#(description)',"applicationId":'#(ApplicationId)',"applicationTypeId":1,"appFeesId":0,"appId":'#(appId)',"feesRefId":'#(licFeesRefId)',"initialFees":'#(licInitialFees)',"licensingFees":'#(licenseFees)',"amendmentFees":"0.00","renewalFees":'#(renewalFees)',"totalFees":'#(totalFees)',"filingFees":'#(licfilingFees)',"ancillaryFees":'#(licAncillaryFees)',"isFeesWaived":false,"underPaymentAmount":'#(totalFees)',"amountReceived":"0.00","waivedComment":null,"isBondReceived":false,"isBondRequired":false,"bondFee":'#(bondFees)',"term":'#(termInYears)',"termDesc":'#(termDesc)',"seasonalStartDate":null,"seasonalEndDate":null,"isFeesCountBased":false,"isFeesUnitBased":false,"numOfUnits":0,"paymentDetails":[],"lateFee":0,"isFeesBarPerDay":null}],"bondDetails":null,"isPaymentFailed":false,"isUnderpaid":true,"sendNotification":false,"fundDueDate":'#(futureDate)',"emailNotificationDetail":{"applicant":{"communicationId":8531,"email":"automation@test.com","appId":'#(appId)',"emailContactTypeId":1,"isChecked":true,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"attorney":{"communicationId":0,"email":null,"appId":0,"emailContactTypeId":0,"isChecked":false,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"communityBoard":{"communicationId":0,"email":null,"appId":0,"emailContactTypeId":0,"isChecked":false,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"other":{"communicationId":0,"email":"","appId":'#(appId)',"emailContactTypeId":0,"isChecked":false,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"isInstantEmail":false,"appId":'#(appId)',"createdBy":"Tarun  Gupta"}},"notificationDetails":{"applicant":{"communicationId":8531,"email":"automation@test.com","appId":'#(appId)',"emailContactTypeId":1,"isChecked":true,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"attorney":{"communicationId":0,"email":null,"appId":0,"emailContactTypeId":0,"isChecked":false,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"communityBoard":{"communicationId":0,"email":null,"appId":0,"emailContactTypeId":0,"isChecked":false,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"other":{"communicationId":0,"email":"","appId":'#(appId)',"emailContactTypeId":0,"isChecked":false,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"isInstantEmail":false,"appId":'#(appId)',"createdBy":"Tarun  Gupta"},"taskId":null}
	 			  
	 
	  When method post
	  Then status 200
	 

   
   

# ********* SAVE Application Details To Save *********************
    Given path '/internalapi/api/licensing/app/save'
    And header authorization = 'Bearer ' + strToken
    And request {"isApproved":false,"appId":'#(appId)',"formID":'#(formId)',"applicationID":'#(ApplicationId)',"formName":'#(description)',"formType":{},"formTypeId":null,"applicationType":{},"applicationTypeId":null,"formCategory":{},"formCategoryId":null,"approvalFlag":null,"status":"","createdBy":"","createdDate":"","modifiedBy":"","sections":[{"show":true,"repeat":false,"isEditable":false,"fields":[{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1842,"key":"","label":"Signature","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":0,"controlType":"radio","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1843,"key":"","label":"Date","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":1,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1851,"key":"","label":"Title","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":2,"controlType":"dropdown","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2232,"key":"","label":"First Name","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":3,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2233,"key":"","label":"Middle Name","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":4,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2234,"key":"","label":"Last Name","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":5,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""}],"sectionID":1200,"sectionName":"","key":"0","label":"Applicant Statement","order":9,"createdBy":"","createdDate":"","modifiedBy":"","tableName":"","isSpecial":false,"isMultipleAllowed":false,"sectionType":null,"sectionSubTypeId":null,"subSections":[],"sectionFieldOrders":[]},{"show":true,"repeat":false,"isEditable":false,"fields":[{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1957,"key":"","label":"By what right does the applicant have possession of the premises?","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":1,"controlType":"radio","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1958,"key":"","label":"Explain","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":0,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1959,"key":"","label":"Do the terms of the lease or other arrangement require the applicant to provide any consideration based on a percentage of the receipts of the business?","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":2,"controlType":"radio","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1960,"key":"","label":"If yes, list the section/page of the lease this information can be found","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":3,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1961,"key":"","label":"Does or will anyone other than the applicant/principals share on a percentage basis or in any way in the receipts, losses, or deficiencies of the business to any extent whatsoever","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":4,"controlType":"radio","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""}],"sectionID":1226,"sectionName":"","key":"0","label":"Right to Premises","order":5,"createdBy":"","createdDate":"","modifiedBy":"","tableName":"","isSpecial":false,"isMultipleAllowed":false,"sectionType":null,"sectionSubTypeId":null,"subSections":[{"show":true,"repeat":false,"isEditable":false,"fields":[{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1685,"key":"","label":"First Name","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":0,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1686,"key":"","label":"Middle Name","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":1,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1687,"key":"","label":"Last Name","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":2,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"1 wall street","fieldID":1697,"key":"","label":"Address Line 1/ POB #","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":6,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1698,"key":"","label":"Address Line 2","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":7,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"New York","fieldID":1699,"key":"","label":"City","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":8,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1700,"key":"","label":"State/Region","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":9,"controlType":"dropdown","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"10011","fieldID":1701,"key":"","label":"Zip/Postal Code","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":10,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1754,"key":"","label":"Address","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":5,"controlType":"label","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1934,"key":"","label":"Nature of Interest","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":3,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1935,"key":"","label":"Date acquired","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":4,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""}],"sectionID":1218,"sectionName":"","key":"0","label":"Other Interested","order":1,"createdBy":"","createdDate":"","modifiedBy":"","tableName":"","isSpecial":false,"isMultipleAllowed":false,"sectionType":null,"sectionSubTypeId":null,"subSections":[],"sectionFieldOrders":[]}],"sectionFieldOrders":[]},{"show":true,"repeat":false,"isEditable":false,"fields":[{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1933,"key":"","label":"Signature","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":0,"controlType":"radio","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1936,"key":"","label":"Date","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":1,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""}],"sectionID":1239,"sectionName":"","key":"0","label":"Bulletin 254","order":10,"createdBy":"","createdDate":"","modifiedBy":"","tableName":"","isSpecial":false,"isMultipleAllowed":false,"sectionType":null,"sectionSubTypeId":null,"subSections":[],"sectionFieldOrders":[]},{"show":true,"repeat":false,"isEditable":false,"fields":[{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2053,"key":"","label":"Describe the area where the premises is to be located","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":0,"controlType":"radio","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2054,"key":"","label":"State what the area is zoned for","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":1,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2055,"key":"","label":"Provide a description of the premises to be licensed. Describe all building/structures that will be utilized in business operations including the number of floors in each.","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":2,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2056,"key":"","label":"has the building/premises been known by any other address?","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":3,"controlType":"radio","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2057,"key":"","label":"If yes, please Specify","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":4,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2058,"key":"","label":"has the premises to be licensed and or any other floor in the building been previously licensed or currently licensed to traffic in alcoholic beverages?","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":5,"controlType":"radio","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2059,"key":"","label":"What was the prior use of the premises to be licensed?","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":6,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2060,"key":"","label":"Does the proposed location of the business comply with all state and local regulations and zoning codes?","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":7,"controlType":"radio","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2061,"key":"","label":"is there interior access to any other floor that will not be part of the licensed premises?","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":8,"controlType":"radio","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2062,"key":"","label":"if yes, list floor and means of access to each floor.","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":9,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2063,"key":"","label":"Does any other person have access to this area?","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":10,"controlType":"radio","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2064,"key":"","label":"where will the alcohol be stored","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":11,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2065,"key":"","label":"if applying for a farm winery license, special farm winery license or micro winery license, the premises must be located on a farm. In the box below, please provide a detailed description of the agricultural production that qualifies the premises as a farm","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":12,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""}],"sectionID":1248,"sectionName":"","key":"0","label":"Premises Questionnaire","order":7,"createdBy":"","createdDate":"","modifiedBy":"","tableName":"","isSpecial":false,"isMultipleAllowed":false,"sectionType":null,"sectionSubTypeId":null,"subSections":[],"sectionFieldOrders":[]},{"show":true,"repeat":false,"isEditable":false,"fields":[{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1988,"key":"","label":"Will any other business of any kind be conducted on said premises?","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":0,"controlType":"radio","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1989,"key":"","label":"How many Employees?","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":2,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1990,"key":"","label":"If answer is 0, provide explanation","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":3,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1991,"key":"","label":"Workers' Compensation Carrier Name and Policy Number?","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":4,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1992,"key":"","label":"Disability Insurance Carrier name and policy Number","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":5,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2050,"key":"","label":"Check all activities the business will engage in","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":1,"controlType":"checkbox","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""}],"sectionID":1249,"sectionName":"","key":"0","label":"Method of Operation","order":8,"createdBy":"","createdDate":"","modifiedBy":"","tableName":"","isSpecial":false,"isMultipleAllowed":false,"sectionType":null,"sectionSubTypeId":null,"subSections":[],"sectionFieldOrders":[]},{"show":true,"repeat":false,"isEditable":false,"fields":[{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2072,"key":"","label":"Real Property","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":0,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2073,"key":"","label":"Purchase/Contract Price of Business","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":1,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2074,"key":"","label":"Renovations/Improvement Costs","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":2,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2075,"key":"","label":"Miscellaneous","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":3,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2076,"key":"","label":"Cash","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":4,"controlType":"label","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2077,"key":"","label":"Source of Funds","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":5,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2078,"key":"","label":"Personal Questionnaire attached","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":6,"controlType":"checkbox","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2079,"key":"","label":"Dollar Amount","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":7,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2080,"key":"","label":"Total Cash","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":8,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2081,"key":"","label":"Borrowed","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":9,"controlType":"label","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2082,"key":"","label":"Source of Funds","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":10,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2083,"key":"","label":"Personal Questionnaire attached","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":11,"controlType":"checkbox","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2084,"key":"","label":"Dollar Amount","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":12,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2085,"key":"","label":"Total Borrowed","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":13,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2086,"key":"","label":"Total Investment","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":14,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2087,"key":"","label":"Have all investors been disclosed in this application","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":15,"controlType":"radio","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""}],"sectionID":1253,"sectionName":"","key":"0","label":"Financial Disclosure","order":6,"createdBy":"","createdDate":"","modifiedBy":"","tableName":"","isSpecial":false,"isMultipleAllowed":false,"sectionType":null,"sectionSubTypeId":null,"subSections":[],"sectionFieldOrders":[]}],"formVersionId":1231,"version":7,"licenseDescription":"","statusDescription":"Draft","appStatusId":1,"showApplicant":true,"showRepresentative":true,"showPrincipal":true,"showLandlord":true,"showVehicles":false,"showSchedule":false,"staticTabSequence":{"Applicant Information":0,"Principal":1,"Representative":2,"Landlord Identification":3,"Personal Questionnaire":4},"staticTaborder":["Applicant Information","Principal","Representative","Landlord Identification","Personal Questionnaire"],"showPQ":true}
    When method post
    Then status 200
   
    
    Given path '/internalapi/api/licensing/fees/licenses/get/'+appId
          And header authorization = 'Bearer ' + strToken
          And header Content-Type = 'application/json; charset=utf-8'
   			  And header Accept = 'application/json; text/plain;*/*'
  			  And request ""
			    When method get
			    Then status 200
			     
			    And print response[0].appFeesId
			    And def appFeesId1 = response[0].appFeesId
			   And def feesRefId1 = response[0].feesRefId
			    And print appFeesId1
			    And print feesRefId1 
			    And def applicationTypeId = response[0].applicationTypeId
			    And print applicationTypeId 
# ********* Save PAYMENT ********************* 
    
    Given path '/internalapi/api/licensing/fees/details/save/'+appId +'/false'
     * def licFeesDate =
		  """
		  function() {
		    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
		    var sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
		    var date = new java.util.Date();
		    return sdf.format(date);
		  } 
		  
		  
		  """
	* def slaDate = licFeesDate()
	 * def licDate =
		  """
		  function() {
		    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
		    var sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS'Z'");
		    var date = new java.util.Date();
		    return sdf.format(date);
		  } 
		  
		  
		  """
		  
		  * def slaaDate = licDate()
	* def licInitialFees1 = licInitialFees+''
	And print licInitialFees1
	* def renewalFees1 = renewalFees+''
	And print renewalFees1
	* def totalFees1 = totalFees+''
	
	And print totalFees1
	* def licAncillaryFees1 = licAncillaryFees+''
	* def licfilingFees1 = licfilingFees+''
		
    And header authorization = 'Bearer ' + strToken
And request {"checks":[{"checkDetailId":'#(checkDetailId)',"appId":'#(appId)',"paymentSource":"RDC","checkNo":"1","batchNo":"1","itemNo":"1","slareceivedDate":"2022-03-24T00:00:00.000Z","slaintakeDate":"2022-03-24T00:00:00.000Z","amount":40000,"appliedTo":null,"amountUsed":40000,"comment":null,"isReplacement":null,"replacementReason":null,"isActive":true,"createdBy":"tgupta@svam.com","createdDate":"2022-03-24T09:43:00.873","modifiedBy":null,"modifiedDate":null,"applyClick":true,"amountAvailable":0}],"appFees":{"appFees":[{"licenseName":'#(description)',"applicationId":'#(ApplicationId)',"applicationTypeId":1,"appFeesId":'#(licFeesRefId)',"appId":'#(appId)',"feesRefId":'#(licFeesRefId)',"initialFees":0,"licensingFees":'#(licenseFees)',"amendmentFees":"0.00","renewalFees":"0.00","totalFees":'#(totalFees1)',"filingFees":'#(licfilingFees1)',"ancillaryFees":"0.00","isFeesWaived":false,"underPaymentAmount":0,"amountReceived":"40000.00","waivedComment":null,"isBondReceived":false,"isBondRequired":true,"bondFee":'#(bondFees)',"term":'#(termInYears)',"termDesc":'#(termDesc)',"seasonalStartDate":null,"seasonalEndDate":null,"isFeesCountBased":false,"isFeesUnitBased":false,"numOfUnits":0,"paymentDetails":[{"appId":'#(appId)',"checkDetailId":'#(checkDetailId)',"checkNo":"1","itemNo":"1","batchNo":"1","amountAppliedForApp":"40000.00","amount":0}],"lateFee":0,"isFeesBarPerDay":null}],"bondDetails":null,"isPaymentFailed":false,"isUnderpaid":false,"sendNotification":false,"fundDueDate":"1970-01-01T00:00:00.000Z","emailNotificationDetail":{"applicant":{"communicationId":15102,"email":"automation@test.com","appId":'#(appId)',"emailContactTypeId":1,"isChecked":true,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"attorney":{"communicationId":0,"email":null,"appId":0,"emailContactTypeId":0,"isChecked":false,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"communityBoard":{"communicationId":0,"email":null,"appId":0,"emailContactTypeId":0,"isChecked":false,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"other":{"communicationId":0,"email":"","appId":'#(appId)',"emailContactTypeId":0,"isChecked":false,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"isInstantEmail":false,"appId":'#(appId)',"createdBy":"Tarun  Gupta"}},"notificationDetails":{"applicant":{"communicationId":15102,"email":"automation@test.com","appId":'#(appId)',"emailContactTypeId":1,"isChecked":true,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"attorney":{"communicationId":0,"email":null,"appId":0,"emailContactTypeId":0,"isChecked":false,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"communityBoard":{"communicationId":0,"email":null,"appId":0,"emailContactTypeId":0,"isChecked":false,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"other":{"communicationId":0,"email":"","appId":'#(appId)',"emailContactTypeId":0,"isChecked":false,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"isInstantEmail":false,"appId":'#(appId)',"createdBy":"Tarun  Gupta"},"taskId":null}
#          #{"checks":[{"checkDetailId":'#(checkDetailId)',"appId":'#(appId)',"paymentSource":"RDC","checkNo":"1","batchNo":"1","itemNo":"1","slareceivedDate":'#(slaDate)',"slaintakeDate":'#(slaDate)',"amount":'#(totalFees1)',"appliedTo":null,"amountUsed":'#(totalFees1)',"comment":null,"isReplacement":null,"replacementReason":null,"isActive":true,"createdBy":"tgupta@svam.com","createdDate":'#(slaaDate)',"modifiedBy":null,"modifiedDate":null,"applyClick":true,"amountAvailable":0}],"appFees":{"appFees":[{"licenseName":'#(description)',"applicationId":'#(ApplicationId)',"applicationTypeId":1,"appFeesId":'#(licFeesRefId)',"appId":'#(appId)',"feesRefId":'#(licFeesRefId)',"initialFees":'#(licInitialFees1)',"licensingFees":'#(licenseFees)',"amendmentFees":"0.00","renewalFees":'#(renewalFees1)',"totalFees":'#(totalFees1)',"filingFees":'#(licfilingFees1)',"ancillaryFees":'#(licAncillaryFees1)',"isFeesWaived":false,"underPaymentAmount":"0.00","amountReceived":'#(totalFees1)',"waivedComment":null,"isBondReceived":false,"isBondRequired":true,"bondFee":'#(bondFees)',"term":'#(termInYears)',"termDesc":'#(termDesc)',"seasonalStartDate":null,"seasonalEndDate":null,"isFeesCountBased":false,"isFeesUnitBased":false,"numOfUnits":0,"paymentDetails":[{"appId":'#(appId)',"checkDetailId":'#(checkDetailId)',"checkNo":"1","itemNo":"1","batchNo":"1","amountAppliedForApp":'#(totalFees1)',"amount":0}],"lateFee":0,"isFeesBarPerDay":null}],"bondDetails":null,"isPaymentFailed":false,"isUnderpaid":false,"sendNotification":false,"fundDueDate":"1970-01-01T00:00:00.000Z","emailNotificationDetail":{"applicant":{"communicationId":8531,"email":"automation@test.com","appId":'#(appId)',"emailContactTypeId":1,"isChecked":true,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"attorney":{"communicationId":0,"email":null,"appId":0,"emailContactTypeId":0,"isChecked":false,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"communityBoard":{"communicationId":0,"email":null,"appId":0,"emailContactTypeId":0,"isChecked":false,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"other":{"communicationId":0,"email":"","appId":'#(appId)',"emailContactTypeId":0,"isChecked":false,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"isInstantEmail":false,"appId":'#(appId)',"createdBy":"Tarun  Gupta"}},"notificationDetails":{"applicant":{"communicationId":2560394,"email":"automation@test.com","appId":'#(appId)',"emailContactTypeId":1,"isChecked":true,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"attorney":{"communicationId":0,"email":null,"appId":0,"emailContactTypeId":0,"isChecked":false,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"communityBoard":{"communicationId":0,"email":null,"appId":0,"emailContactTypeId":0,"isChecked":false,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"other":{"communicationId":0,"email":"","appId":'#(appId)',"emailContactTypeId":0,"isChecked":false,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"isInstantEmail":false,"appId":'#(appId)',"createdBy":"Tarun  Gupta"},"taskId":null}   	
 			
 When method post
    Then status 200
    And print response
    
    
    
# ********* SAVE Application Details To Save *********************
    Given path '/internalapi/api/licensing/app/save'
    And header authorization = 'Bearer ' + strToken
    And request {"isApproved":false,"appId":'#(appId)',"formID":'#(formId)',"applicationID":'#(ApplicationId)',"formName":'#(description)',"formType":{},"formTypeId":null,"applicationType":{},"applicationTypeId":null,"formCategory":{},"formCategoryId":null,"approvalFlag":null,"status":"","createdBy":"","createdDate":"","modifiedBy":"","sections":[{"show":true,"repeat":false,"isEditable":false,"fields":[{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1842,"key":"","label":"Signature","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":0,"controlType":"radio","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1843,"key":"","label":"Date","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":1,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1851,"key":"","label":"Title","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":2,"controlType":"dropdown","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2232,"key":"","label":"First Name","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":3,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2233,"key":"","label":"Middle Name","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":4,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2234,"key":"","label":"Last Name","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":5,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""}],"sectionID":1200,"sectionName":"","key":"0","label":"Applicant Statement","order":9,"createdBy":"","createdDate":"","modifiedBy":"","tableName":"","isSpecial":false,"isMultipleAllowed":false,"sectionType":null,"sectionSubTypeId":null,"subSections":[],"sectionFieldOrders":[]},{"show":true,"repeat":false,"isEditable":false,"fields":[{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1957,"key":"","label":"By what right does the applicant have possession of the premises?","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":1,"controlType":"radio","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1958,"key":"","label":"Explain","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":0,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1959,"key":"","label":"Do the terms of the lease or other arrangement require the applicant to provide any consideration based on a percentage of the receipts of the business?","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":2,"controlType":"radio","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1960,"key":"","label":"If yes, list the section/page of the lease this information can be found","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":3,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1961,"key":"","label":"Does or will anyone other than the applicant/principals share on a percentage basis or in any way in the receipts, losses, or deficiencies of the business to any extent whatsoever","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":4,"controlType":"radio","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""}],"sectionID":1226,"sectionName":"","key":"0","label":"Right to Premises","order":5,"createdBy":"","createdDate":"","modifiedBy":"","tableName":"","isSpecial":false,"isMultipleAllowed":false,"sectionType":null,"sectionSubTypeId":null,"subSections":[{"show":true,"repeat":false,"isEditable":false,"fields":[{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1685,"key":"","label":"First Name","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":0,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1686,"key":"","label":"Middle Name","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":1,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1687,"key":"","label":"Last Name","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":2,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"1 wall street","fieldID":1697,"key":"","label":"Address Line 1/ POB #","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":6,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1698,"key":"","label":"Address Line 2","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":7,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"New York","fieldID":1699,"key":"","label":"City","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":8,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1700,"key":"","label":"State/Region","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":9,"controlType":"dropdown","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"10011","fieldID":1701,"key":"","label":"Zip/Postal Code","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":10,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1754,"key":"","label":"Address","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":5,"controlType":"label","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1934,"key":"","label":"Nature of Interest","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":3,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1935,"key":"","label":"Date acquired","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":4,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""}],"sectionID":1218,"sectionName":"","key":"0","label":"Other Interested","order":1,"createdBy":"","createdDate":"","modifiedBy":"","tableName":"","isSpecial":false,"isMultipleAllowed":false,"sectionType":null,"sectionSubTypeId":null,"subSections":[],"sectionFieldOrders":[]}],"sectionFieldOrders":[]},{"show":true,"repeat":false,"isEditable":false,"fields":[{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1933,"key":"","label":"Signature","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":0,"controlType":"radio","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1936,"key":"","label":"Date","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":1,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""}],"sectionID":1239,"sectionName":"","key":"0","label":"Bulletin 254","order":10,"createdBy":"","createdDate":"","modifiedBy":"","tableName":"","isSpecial":false,"isMultipleAllowed":false,"sectionType":null,"sectionSubTypeId":null,"subSections":[],"sectionFieldOrders":[]},{"show":true,"repeat":false,"isEditable":false,"fields":[{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2053,"key":"","label":"Describe the area where the premises is to be located","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":0,"controlType":"radio","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2054,"key":"","label":"State what the area is zoned for","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":1,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2055,"key":"","label":"Provide a description of the premises to be licensed. Describe all building/structures that will be utilized in business operations including the number of floors in each.","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":2,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2056,"key":"","label":"has the building/premises been known by any other address?","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":3,"controlType":"radio","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2057,"key":"","label":"If yes, please Specify","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":4,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2058,"key":"","label":"has the premises to be licensed and or any other floor in the building been previously licensed or currently licensed to traffic in alcoholic beverages?","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":5,"controlType":"radio","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2059,"key":"","label":"What was the prior use of the premises to be licensed?","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":6,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2060,"key":"","label":"Does the proposed location of the business comply with all state and local regulations and zoning codes?","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":7,"controlType":"radio","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2061,"key":"","label":"is there interior access to any other floor that will not be part of the licensed premises?","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":8,"controlType":"radio","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2062,"key":"","label":"if yes, list floor and means of access to each floor.","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":9,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2063,"key":"","label":"Does any other person have access to this area?","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":10,"controlType":"radio","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2064,"key":"","label":"where will the alcohol be stored","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":11,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2065,"key":"","label":"if applying for a farm winery license, special farm winery license or micro winery license, the premises must be located on a farm. In the box below, please provide a detailed description of the agricultural production that qualifies the premises as a farm","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":12,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""}],"sectionID":1248,"sectionName":"","key":"0","label":"Premises Questionnaire","order":7,"createdBy":"","createdDate":"","modifiedBy":"","tableName":"","isSpecial":false,"isMultipleAllowed":false,"sectionType":null,"sectionSubTypeId":null,"subSections":[],"sectionFieldOrders":[]},{"show":true,"repeat":false,"isEditable":false,"fields":[{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1988,"key":"","label":"Will any other business of any kind be conducted on said premises?","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":0,"controlType":"radio","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1989,"key":"","label":"How many Employees?","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":2,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1990,"key":"","label":"If answer is 0, provide explanation","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":3,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1991,"key":"","label":"Workers' Compensation Carrier Name and Policy Number?","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":4,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":1992,"key":"","label":"Disability Insurance Carrier name and policy Number","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":5,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2050,"key":"","label":"Check all activities the business will engage in","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":1,"controlType":"checkbox","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""}],"sectionID":1249,"sectionName":"","key":"0","label":"Method of Operation","order":8,"createdBy":"","createdDate":"","modifiedBy":"","tableName":"","isSpecial":false,"isMultipleAllowed":false,"sectionType":null,"sectionSubTypeId":null,"subSections":[],"sectionFieldOrders":[]},{"show":true,"repeat":false,"isEditable":false,"fields":[{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2072,"key":"","label":"Real Property","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":0,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2073,"key":"","label":"Purchase/Contract Price of Business","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":1,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2074,"key":"","label":"Renovations/Improvement Costs","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":2,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2075,"key":"","label":"Miscellaneous","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":3,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2076,"key":"","label":"Cash","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":4,"controlType":"label","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2077,"key":"","label":"Source of Funds","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":5,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2078,"key":"","label":"Personal Questionnaire attached","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":6,"controlType":"checkbox","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2079,"key":"","label":"Dollar Amount","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":7,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2080,"key":"","label":"Total Cash","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":8,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2081,"key":"","label":"Borrowed","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":9,"controlType":"label","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2082,"key":"","label":"Source of Funds","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":10,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2083,"key":"","label":"Personal Questionnaire attached","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":11,"controlType":"checkbox","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2084,"key":"","label":"Dollar Amount","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":12,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2085,"key":"","label":"Total Borrowed","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":13,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2086,"key":"","label":"Total Investment","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":14,"controlType":"textbox","defaultValue":"","format":"","isCalculatedField":false,"isEmptyField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""},{"dataSource":null,"show":true,"isSpecial":false,"sectionRepeatNo":1,"value":"","fieldID":2087,"key":"","label":"Have all investors been disclosed in this application","dataType":"text","required":false,"isSingleLine":true,"minLength":0,"maxLength":0,"order":15,"controlType":"radio","defaultValue":"","format":"","isCalculatedField":false,"fieldName":"","columnName":"","expression":"","dataSourceId":0,"trigger":"","metaData":null,"createdBy":"","modifiedBy":""}],"sectionID":1253,"sectionName":"","key":"0","label":"Financial Disclosure","order":6,"createdBy":"","createdDate":"","modifiedBy":"","tableName":"","isSpecial":false,"isMultipleAllowed":false,"sectionType":null,"sectionSubTypeId":null,"subSections":[],"sectionFieldOrders":[]}],"formVersionId":1231,"version":7,"licenseDescription":"","statusDescription":"Draft","appStatusId":1,"showApplicant":true,"showRepresentative":true,"showPrincipal":true,"showLandlord":true,"showVehicles":false,"showSchedule":false,"staticTabSequence":{"Applicant Information":0,"Principal":1,"Representative":2,"Landlord Identification":3,"Personal Questionnaire":4},"staticTaborder":["Applicant Information","Principal","Representative","Landlord Identification","Personal Questionnaire"],"showPQ":true}
    When method post
    Then status 200
    And def serverResponse = response
   
    
# ********* Application SUBMIT ********************* 
    
    
    Given path '/internalapi/api/licensing/app/submit'
    And header authorization = 'Bearer ' + strToken
    And request {"appId":'#(appId)',"wfType":null}
    When method post
    Then status 200
    And def serverResponse = response
   
    And match response.success == true
  
  

 # ********* AssignApplicationsToExaminer *********************
    Given path '/internalapi/api/licensing/examiner/assignApplicationsToExaminer'
    
    And header authorization = 'Bearer ' + strToken
    And request [{"appId":'#(appId)',"examinerId":1069,"priority":"Normal"}]
    When method post
    And def serverResponse = response
   
    
    
    
 
    
 # ********* Examiner Review Approval to LB ********************* 
#
    Given path '/internalapi/api/licensing/examiner-review/SaveNewPermit'
    
    * def summisionDate =
		  """
		  function() {
		    var SimpleDateFormat = Java.type('java.text.SimpleDateFormat');
		    var sdf = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss.SSS");
		    var date = new java.util.Date();
		    return sdf.format(date);
		  } 
		  
		  
		  """
	* def formatedSumbitDate = summisionDate()
    #And header authorization = 'Bearer ' + strTokenRole
    And header authorization = 'Bearer ' + strToken
    And header current-wfroleid = 4
    And request {"isFingerPrintsApproved":true,"isFingerPrintsRequired":false,"isCorpLLCDissolved":false,"isCorpLLCDTaken":false,"isSendPDLetter":false,"isDisable500LB_FBPT":false,"isDisableLBForPD":false,"isDisableLBForCaseClosed":false,"isDisableLateRenewalAndUnderpayment":false,"isLiquidatorPermitHasCompleted":-1,"isSubmit":true,"fieldDeficiencies":[],"masterFileData":[],"combinedCraftData":[],"application":{"applicationCategory":6,"appId":'#(appId)',"applicationId":'#(ApplicationId)',"licePermitTypeId":null,"applicationTypeId":1,"formVersionId":1498,"formId":1111,"legalName":"Alm 2457 Industrial Alcohol","submitDate":"2021-09-23T12:56:31.137","isGISRequired":null,"licenseDescription":"Industrial Alcohol Manufacturer's Permit (Fuel Only)","recommendedDecisionId":null,"status500":null,"isApplicableForPDLetter":false,"countyName":"Albany","priority":"Normal","expirationDate":null,"appStatusId":2,"taskStatus":"Awaiting Review","taskId":1526,"currentWfstatus":null,"communityBoard":null,"isLicenseApplication":false,"currentDueDate":null,"isFinalDeficiency":null,"isHighlyDeficient":null,"isAllDeficienciesMet":null,"pastDueDate":null,"memo":null,"isOneTimePermit":null,"dueDateAction":null,"isDisapprovedForCause":false,"isNotQualified":false,"event":null,"appStatus":{"appStatusId":2,"statusDescription":"IntakeComplete","isActive":true,"createdBy":null,"createdDate":null,"modifiedBy":null,"modifiedDate":null},"applicationType":null,"assignAppExaminer":{"appExaminerId":473,"appId":'#(appId)',"examinerId":1069,"name":null,"assignDate":"2021-09-23T12:56:31.433","isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"modifiedDate":null},"assignAppToLB":null,"licePermitType":{"licPermitTypeId":424,"type":"2","category":"6","product":"","class":null,"description":null,"sectionOfLaw":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"modifiedDate":null,"isTempPermit":false,"isELicensingPermit":true,"isAdditionalBar":false},"assoApplicationList":[],"isTempPermit":null,"isTempOrLiq":false,"licPermitTypeId":424,"isAssociatedLicense":null,"effectiveDate":null,"assignedUserId":null,"amendmentTypeId":null,"amendmentType":null,"disapprovedDate":null,"condApprovedDate":null,"addressId":null,"isCaseOpen":null,"isClosed":null,"isSpecialEventPlusFour":null,"isSpecialEventInsideFiveBoroughs":null,"licStatus":null,"createdBy":null,"licenseId":null,"address":null,"isNybeApp":true,"isHearingCompleted":null,"does500FtHearingExist":null,"parentAppStatus":null,"premisesAppCount":0,"statusDescription":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskRoleId":0,"taskDecision":null,"isActive":true,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":"2021-09-23T12:56:31.137"},"appId":'#(appId)',"notificationTypeId":2028,"applicationType":1,"decisionType":{"name":"Send to Licensing Board","value":2},"emailNotificationModel":{"applicant":{},"attorney":{},"communityBoard":{},"other":{}},"hasErrors":[],"taskId":1526,"newComments":"SEND TO LB AUTOMATION","recommendedDecisionId":"1"}
                #{"isFingerPrintsApproved":true,"isFingerPrintsRequired":false,"isCorpLLCDissolved":false,"isCorpLLCDTaken":false,"isSendPDLetter":false,"isDisable500LB_FBPT":false,"isDisableLBForPD":false,"isDisableLBForCaseClosed":false,"isDisableLateRenewalAndUnderpayment":false,"isLiquidatorPermitHasCompleted":-1,"isSubmit":true,"fieldDeficiencies":[],"masterFileData":[],"combinedCraftData":[],"application":{"applicationCategory":6,"appId":'#(appId)',"applicationId":'#(ApplicationId)',"licePermitTypeId":null,"applicationTypeId":1,"formVersionId":1158,"formId":'#(formId)',"legalName":"Automation  AutoPermit","submitDate":'#(formatedSumbitDate)',"isGISRequired":null,"licenseDescription":'#(description)',"recommendedDecisionId":null,"status500":null,"isApplicableForPDLetter":false,"countyName":"New York","priority":"Normal","expirationDate":null,"appStatusId":3,"taskStatus":"Awaiting Review","taskId":1526,"currentWfstatus":null,"communityBoard":null,"isLicenseApplication":false,"currentDueDate":null,"isFinalDeficiency":null,"isHighlyDeficient":false,"isAllDeficienciesMet":null,"pastDueDate":null,"memo":null,"isOneTimePermit":null,"dueDateAction":null,"isDisapprovedForCause":false,"isNotQualified":false,"eventDate":null,"appStatus":{"appStatusId":3,"statusDescription":"Under Review","isActive":true,"createdBy":null,"createdDate":null,"modifiedBy":null,"modifiedDate":null},"applicationType":null,"assignAppExaminer":{"appExaminerId":1069,"appId":'#(appId)',"examinerId":1069,"name":null,"assignDate":'#(formatedSumbitDate)',"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"modifiedDate":null},"assignAppToLB":null,"licePermitType":{"licPermitTypeId":'#(mainLicensePermitTypeId)',"type":"1","category":"1","product":'#(productName)',"class":null,"description":null,"sectionOfLaw":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"modifiedDate":null,"isTempPermit":false,"isELicensingPermit":false,"isAdditionalBar":false},"assoApplicationList":[],"isTempPermit":null,"isTempOrLiq":false,"licPermitTypeId":'#(mainLicensePermitTypeId)',"isAssociatedLicense":null,"effectiveDate":null,"assignedUserId":null,"amendmentTypeId":null,"amendmentType":null,"disapprovedDate":null,"condApprovedDate":null,"addressId":null,"isCaseOpen":null,"isClosed":null,"isSpecialEventPlusFour":null,"isSpecialEventInsideFiveBoroughs":null,"licStatus":null,"createdBy":null,"licenseId":null,"address":null,"isNybeApp":false,"isHearingCompleted":null,"does500FtHearingExist":null,"parentAppStatus":null,"premisesAppCount":0,"statusDescription":null,"eventAddress":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskRoleId":0,"taskDecision":null,"isActive":true,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":'#(formatedSumbitDate)'},"appId":'#(appId)',"notificationTypeId":2028,"applicationType":1,"decisionType":{"name":"Send to Licensing Board","value":2},"emailNotificationModel":{"applicant":{},"attorney":{},"communityBoard":{},"other":{}},"hasErrors":[],"taskId":1026,"newComments":"","recommendedDecisionId":null}
                #{"isFingerPrintsApproved":true,"isFingerPrintsRequired":false,"isCorpLLCDissolved":false,"isCorpLLCDTaken":false,"isSendPDLetter":false,"isDisable500LB_FBPT":false,"isDisableLBForPD":false,"isDisableLBForCaseClosed":false,"isDisableLateRenewalAndUnderpayment":false,"isLiquidatorPermitHasCompleted":-1,"isSubmit":true,"fieldDeficiencies":[],"masterFileData":[],"combinedCraftData":[],"application":{"applicationCategory":6,"appId":      5844,"applicationId":"NA-0567-22-03229","licePermitTypeId":null,"applicationTypeId":1,"formVersionId":1158,"formId":1113,"legalName":"Automation AutoPermit","submitDate":"2022-04-06T07:11:29.5","isGISRequired":null,        "licenseDescription":"Industrial alco","recommendedDecisionId":null,"status500":null"isApplicableForPDLetter":false,"countyName":"New York","priority":"Normal","expirationDate":null,"appStatusId":3,"taskStatus":"Awaiting Review","taskId":1526,"currentWfstatus":null,"communityBoard":null,"isLicenseApplication":false,"currentDueDate":null,"isFinalDeficiency":null,"isHighlyDeficient":null,"isAllDeficienciesMet":null,"pastDueDate":"5/6/2022","memo":null,"isOneTimePermit":null,"dueDateAction":null,"isDisapprovedForCause":false,"isNotQualified":false,"eventDate":null,"appStatus":{"appStatusId":3,"statusDescription":"Under Review","isActive":true,"createdBy":null,"createdDate":null,"modifiedBy":null,"modifiedDate":null},"applicationType":null,"assignAppExaminer":{"appExaminerId":3380,"appId":5844,"examinerId":1069,"name":null,"assignDate":"2022-04-06T11:11:30.423","isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"modifiedDate":null},"assignAppToLB":null,"licePermitType":{"licPermitTypeId":423,"type":"2","category":"6","product":"","class":null,"description":null,"sectionOfLaw":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"modifiedDate":null,"isTempPermit":false,"isELicensingPermit":true,"isAdditionalBar":false},"assoApplicationList":[],"isTempPermit":null,"isTempOrLiq":false,"licPermitTypeId":423,"isAssociatedLicense":null,"effectiveDate":null,"assignedUserId":null,"amendmentTypeId":null,"amendmentType":null,"disapprovedDate":null,"condApprovedDate":null,"addressId":null,"isCaseOpen":null,"isClosed":null,"isSpecialEventPlusFour":null,"isSpecialEventInsideFiveBoroughs":null,"licStatus":null,"createdBy":null,"licenseId":null,"address":null,"isNybeApp":false,"isHearingCompleted":null,"does500FtHearingExist":null,"parentAppStatus":3,"premisesAppCount":0,"statusDescription":null,"eventAddress":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskRoleId":0,"taskDecision":null,"isActive":true,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":"2022-04-06T11:11:30.43"},"appId":5844,"notificationTypeId":2028,"applicationType":1,"decisionType":{"name":"Send to Licensing Board","value":2},"emailNotificationModel":{"applicant":{},"attorney":{},"communityBoard":{},"other":{}},"hasErrors":[],"taskId":1526,"newComments":"","recommendedDecisionId":"1"}
    When method post
    Then status 200
   
    
   
 # ********* LB Claiming Queue  ********************* 
 
    Given path 'internalapi/api/licensing/claiming-queue/add/'+appId +'/1069'
    And header authorization = 'Bearer ' + strToken
    And header current-wfroleid = 5
    And request {}
    When method post
    Then status 200
   
             
          
 # ********* LB Disapproval *********************    
   
    
    Given path '/internalapi/api/licensing/new-permit/saveDecision'
    And header authorization = 'Bearer ' + strToken
    And header current-wfroleid = 5
    And request {"isSubmit":true,"isHoldForCB":false,"isWaiverReceived":false,"isBuyerApproved":-1,"masterFileData":[],"combinedCraftData":[],"appId":'#(appId)',"applicationType":1,"applicationId":'#(ApplicationId)',"legalName":"Automation AutoPermit","statusId":3,"decisionType":{"name":"Disapproved","value":2,"isChecked":null},"emailNotificationModel":{"applicant":{"communicationId":13564,"email":"automation@test.com","appId":'#(appId)',"emailContactTypeId":1,"isChecked":true,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"attorney":{"communicationId":13567,"email":"sbandi@svam.com","appId":'#(appId)',"emailContactTypeId":2,"isChecked":true,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"communityBoard":{"communicationId":0,"email":null,"appId":0,"emailContactTypeId":0,"isChecked":false,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"other":{"communicationId":0,"email":"","appId":'#(appId)',"emailContactTypeId":0,"isChecked":false,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null}},"hasErrors":[],"licPermitTypeId":422,"taskId":1601,"newComments":"test","disApproval":{"isDisapprovalForCause":true,"isDisapprovalLetterAttach":true,"selectInput":{"fromFields":[{"id":1,"label":"A temporary permit may not be considered for approval unless it is preceded or accompanied by an application for a permanent license."},{"id":2,"label":"A temporary permit for a New York City premises may not be considered for approval, unless a contract of sale is submitted with the application.  No contract of sale was submitted for this transaction."},{"id":3,"label":"A liquidators permit may not be considered for approval when the application it is filed in conjunction with is disapproved."},{"id":4,"label":"A liquidators permit may not be approved when the seller of the alcohol is currently in arrears and on the Authoritys COD List.  The seller will need to clear all accounts in arrears and re-apply."},{"id":5,"label":"An insufficient fee was submitted with the application.  Total fee due was $___ and the total fee paid was $_____"},{"id":6,"label":"Check number ____ in the amount of ________ , for payment in connection with this application was returned due to insufficient funds.  A request for certified funds was sent to the applicant on _________, to which there was no reply."},{"id":7,"label":"Licensees are not eligible to change corporate entities using an endorsement/corporate change application.  A licensee forming a new entity and using a new FEIN# must file a new application under the new corporate entity."},{"id":8,"label":"Endorsement applications may not be used to change an application from an executor of an estate to a corporation.  A new application must be filed once the estate is settled."},{"id":9,"label":"Licensee is not eligible to file a removal under a new corporate entity.  Licensee must file a new application for the new corporate entity with the new FEIN #."},{"id":10,"label":"The applicant submitted an outdated application form that is no longer accepted for processing as of 11/30/13."},{"id":11,"label":"Temporary retail permit was received with an outdated main application."},{"id":12,"label":"The corporate change filed under this serial number is a duplicate of a corporate change filed on _______________under _________________________________, serial number __________."}],"toFields":[],"isRewritable":true,"rewriteLabel":"Edit Reason for Disapproval:","additionalComments":"test","srclabel":"Select","dstlabel":"Add to Notification","additionalLabel":"Additional Reasons for Disapproval:"},"disapprovalReason":[-1],"descriptions":["test"]}}
    
    When method post
    Then status 200
    And def serverResponse = response
    
      Given path '/internalapi/api/licensing/new-permit/saveDecision'
    And header authorization = 'Bearer ' + strToken
    And header current-wfroleid = 5
    And request {"isSubmit":false,"isHoldForCB":false,"isWaiverReceived":false,"isBuyerApproved":-1,"masterFileData":[],"combinedCraftData":[],"appId":'#(appId)',"applicationType":1,"applicationId":'#(ApplicationId)',"legalName":"Automation AutoPermit","statusId":3,"decisionType":{"name":"Disapproved","value":2},"emailNotificationModel":{"applicant":{"communicationId":13552,"email":"automation@test.com","appId":'#(appId)',"emailContactTypeId":1,"isChecked":true,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"attorney":{"communicationId":13555,"email":"sbandi@svam.com","appId":'#(appId)',"emailContactTypeId":2,"isChecked":true,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"communityBoard":{"communicationId":0,"email":null,"appId":0,"emailContactTypeId":0,"isChecked":false,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null},"other":{"communicationId":0,"email":"","appId":'#(appId)',"emailContactTypeId":0,"isChecked":false,"roleId":null,"decision":null,"screen":null,"emails":null,"solicitorEmails":null,"notificatonTypeId":null,"acaType":null,"isInstantEmail":null,"userName":null,"userId":0,"currentRoleId":0,"tempGuid":null,"applicationStatus":null,"taskId":null,"taskRoleId":0,"taskDecision":null,"isActive":null,"createdBy":null,"createdDate":null,"modifiedBy":null,"wfRoleId":0,"modifiedDate":null}},"hasErrors":[],"licPermitTypeId":422,"taskId":1601,"newComments":"test","disApproval":{"isDisapprovalForCause":true,"isDisapprovalLetterAttach":true,"selectInput":{"fromFields":[{"id":1,"label":"A temporary permit may not be considered for approval unless it is preceded or accompanied by an application for a permanent license."},{"id":2,"label":"A temporary permit for a New York City premises may not be considered for approval, unless a contract of sale is submitted with the application.  No contract of sale was submitted for this transaction."},{"id":3,"label":"A liquidators permit may not be considered for approval when the application it is filed in conjunction with is disapproved."},{"id":4,"label":"A liquidators permit may not be approved when the seller of the alcohol is currently in arrears and on the Authoritys COD List.  The seller will need to clear all accounts in arrears and re-apply."},{"id":5,"label":"An insufficient fee was submitted with the application.  Total fee due was $___ and the total fee paid was $_____"},{"id":6,"label":"Check number ____ in the amount of ________ , for payment in connection with this application was returned due to insufficient funds.  A request for certified funds was sent to the applicant on _________, to which there was no reply."},{"id":7,"label":"Licensees are not eligible to change corporate entities using an endorsement/corporate change application.  A licensee forming a new entity and using a new FEIN# must file a new application under the new corporate entity."},{"id":8,"label":"Endorsement applications may not be used to change an application from an executor of an estate to a corporation.  A new application must be filed once the estate is settled."},{"id":9,"label":"Licensee is not eligible to file a removal under a new corporate entity.  Licensee must file a new application for the new corporate entity with the new FEIN #."},{"id":10,"label":"The applicant submitted an outdated application form that is no longer accepted for processing as of 11/30/13."},{"id":11,"label":"Temporary retail permit was received with an outdated main application."},{"id":12,"label":"The corporate change filed under this serial number is a duplicate of a corporate change filed on _______________under _________________________________, serial number __________."}],"toFields":[],"isRewritable":true,"rewriteLabel":"Edit Reason for Disapproval:","additionalComments":"test","srclabel":"Select","dstlabel":"Add to Notification","additionalLabel":"Additional Reasons for Disapproval:"},"disapprovalReason":[-1],"descriptions":["test"]}}
   When method post
    Then status 200
    And def serverResponse = response
   
   
          
 # ********* GET License Id *********************  
  
    Given path '/internalapi/api/application/preview/' + appId
    And header authorization = 'Bearer ' + strToken
    And request {}
    When method get
    Then status 200
    And def serverResponse = response
   
    And print 'serverResponse : ' , serverResponse
    And def appStatus = serverResponse.appStatus.statusDescription
   
    And match appStatus == 'Disapproved'
    
  
  # Given path '/internalapi/api/Communication/GetEmailCommQueue/licensePermit/'+appId
  # * def dbSts = db.getApprovalLicenseEmailMapping((appId+''))
	#And print dbSts
 	#And header authorization = 'Bearer ' + strToken
  	#And header Content-Type = 'application/json; charset=utf-8'
   # And header Accept = 'application/json; text/plain;*/*'
    #And header user-agent = 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.102 Safari/537.36'
  	#And request ""
    #When method get
    #Then status 200
    #And def serverResponse = response
    #
 	#* match serverResponse != []
 	
 Examples:
    | read('/LicenseInputs/DisapprovePermitApp.csv') |
  



 